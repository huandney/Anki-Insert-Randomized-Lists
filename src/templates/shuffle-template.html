<script data-name="Insert Randomized Lists" data-version="v1.0.0">
function run() {
    var ulElements = document.querySelectorAll('ul.shuffle');
    var isFront = document.getElementById("front");

    for (var i = 0; i < ulElements.length; i++) {
        var ul = ulElements[i];
        var children = Array.from(ul.children);
        var indices;

        if (isFront) {
            // When the front of the card is displayed, randomize and store the order
            indices = Array.from({length: children.length}, (_, i) => i);
            for (var j = indices.length - 1; j > 0; j--) {
                var k = Math.floor(Math.random() * (j + 1));
                [indices[j], indices[k]] = [indices[k], indices[j]];  // Swap elements
            }
            sessionStorage.setItem('indices' + i, JSON.stringify(indices));
        } else {
            // When the answer is displayed, retrieve the stored order
            indices = JSON.parse(sessionStorage.getItem('indices' + i));
        }

        // Reorder elements based on indices
        indices.forEach(function(index) {
            ul.appendChild(children[index]);
        });
    }
}

run();
</script>
